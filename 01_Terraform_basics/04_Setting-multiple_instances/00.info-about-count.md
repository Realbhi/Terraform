## Limitation with count and its solution 

With `count`, Terraform treats instances like an **array**:

```hcl
aws_instance.ec2[0]
aws_instance.ec2[1]
aws_instance.ec2[2]
```

So if you want **different tags/config per instance**, you can’t hardcode like separate blocks easily… BUT you *can still do it* using `count.index`.

---

###  Example: Different Name tag per instance (using count)

```hcl
resource "aws_instance" "ec2" {
  count         = 2
  ami           = var.ami
  instance_type = var.instance_type

  tags = {
    Name = "Server-${count.index}"
  }
}
```

This creates:

* Server-0
* Server-1

---

###  Better: Give custom names using a list

```hcl
variable "instance_names" {
  default = ["web", "db", "cache"]
}

resource "aws_instance" "ec2" {
  count         = length(var.instance_names)
  ami           = var.ami
  instance_type = var.instance_type

  tags = {
    Name = var.instance_names[count.index]
  }
}
```

Now tags become:

* web
* db
* cache


